<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Metallophone</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <h1>Metallophone</h1>
    <section class="sounds">
        <div data-key='1C' class="sound">1C</div>
        <div data-key='1D' class="sound">1D</div>
        <div data-key='1E' class="sound">1E</div>
        <div data-key='1F' class="sound">1F</div>
        <div data-key='1G' class="sound">1G</div>
        <div data-key='2A' class="sound">2A</div>
        <div data-key='2B' class="sound">2B</div>
        <div data-key='2C' class="sound">2C</div>
        <div data-key='2D' class="sound">2D</div>
        <div data-key='2E' class="sound">2E</div>
        <div data-key='2F' class="sound">2F</div>
        <div data-key='2G' class="sound">2G</div>
        <div data-key='3A' class="sound">3A</div>
    </section>
    <footer>
        <h2>Credits</h2>
        <p><span>Music:</span>
            <a href="https://freesound.org/people/JamieBlam/packs/9008/">Link</a>
        </p>
        <p><span>Author:</span><a href="https://freesound.org/people/JamieBlam/">Link</a>
        </p>
        <p><span>License:</span><a href="http://creativecommons.org/licenses/by/3.0/"></a>CreativeCommons 3.0</p>
    </footer>

    <audio data-key='1C' src="sounds/146079__jamieblam__1c-hard.wav"></audio>
    <audio data-key='1D' src="sounds/146077__jamieblam__1d-hard.wav"></audio>
    <audio data-key='1E' src="sounds/146084__jamieblam__1e-hard.wav"></audio>
    <audio data-key='1F' src="sounds/146082__jamieblam__1f-hard.wav"></audio>
    <audio data-key='1G' src="sounds/146087__jamieblam__1g-hard.wav"></audio>
    <audio data-key='2A' src="sounds/146086__jamieblam__2a-hard.wav"></audio>
    <audio data-key='2B' src="sounds/146093__jamieblam__2b-hard.wav"></audio>
    <audio data-key='2C' src="sounds/146092__jamieblam__2c-hard.wav"></audio>
    <audio data-key='2D' src="sounds/146097__jamieblam__2d-hard.wav"></audio>
    <audio data-key='2E' src="sounds/146096__jamieblam__2e-hard.wav"></audio>
    <audio data-key='2F' src="sounds/146100__jamieblam__2f-hard.wav"></audio>
    <audio data-key='2G' src="sounds/146099__jamieblam__2g-hard.wav"></audio>
    <audio data-key='3A' src="sounds/146088__jamieblam__3a-hard.wav"></audio>
    <script>
        window.addEventListener('click', function (e) {
            const key = document.querySelector(`div[data-key="${e.target.dataset.key}"]`);
            const audio = document.querySelector(`audio[data-key="${e.target.dataset.key}"]`)
            if (!audio) return;
            audio.currentTime = 0;
            audio.play();
            key.classList.add('playing');
        })

        function removeTransition(e) {
            // console.log(e.target.classList)
            if (e.propertyName !== 'transform') return
            e.target.classList.remove('playing')

        }
        const sounds = document.querySelectorAll('.sound');
        sounds.forEach(sound => sound.addEventListener('transitionend', removeTransition))
    </script>


</body>

</html>
